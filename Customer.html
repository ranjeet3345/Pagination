<!DOCTYPE html>
<html>
<head>
  <title>Customer List</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <h2>Customer List</h2>

  <table id="customer-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Customer ID</th>
      </tr>
    </thead>
    <tbody id="customer-body">
      <!-- Rows will be inserted here -->
    </tbody>
  </table>

  <div class="buttons">
    <button id="prev">Previous</button>
    <button id="next">Next</button>
  </div>

  <script>
    var currentUrl = 'http://127.0.0.1:8000/customerapi/';

    function loadCustomers(url) {
      fetch(url)
        .then(function (response) {
          return response.json();
        })
        .then(function (data) {
          var tbody = document.getElementById('customer-body');
          tbody.innerHTML = ''; // Clear previous rows

          data.results.forEach(function (customer) {
            var row = document.createElement('tr');

            var idCell = document.createElement('td');
            idCell.textContent = customer.id;

            var nameCell = document.createElement('td');
            nameCell.textContent = customer.cname;

            var cidCell = document.createElement('td');
            cidCell.textContent = customer.cid;

            row.appendChild(idCell);
            row.appendChild(nameCell);
            row.appendChild(cidCell);
            tbody.appendChild(row);
          });

          // Handle pagination
          document.getElementById('prev').disabled = !data.previous;
          document.getElementById('next').disabled = !data.next;

          document.getElementById('prev').onclick = function () {
            if (data.previous) loadCustomers(data.previous);
          };

          document.getElementById('next').onclick = function () {
            if (data.next) loadCustomers(data.next);
          };
        })
        .catch(function (error) {
          console.error('Error fetching data:', error);
        });
    }

    loadCustomers(currentUrl);
  </script>
</body>
</html>
